(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{549:function(s,a,t){s.exports=t.p+"assets/img/hadoop-4.7435cf69.jpg"},654:function(s,a,t){"use strict";t.r(a);var e=t(9),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"基本前提"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#基本前提"}},[s._v("#")]),s._v(" 基本前提")]),s._v(" "),e("h3",{attrs:{id:"scp-secure-copy-安全拷贝"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scp-secure-copy-安全拷贝"}},[s._v("#")]),s._v(" scp（secure copy）安全拷贝")]),s._v(" "),e("p",[s._v("定义：scp 可以实现服务器与服务器之间的数据拷贝。")]),s._v(" "),e("p",[s._v("基本语法：scp -r   $pdir/$fname   $user@$host:$pdir/$fname")]),s._v(" "),e("p",[s._v("操作：")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("在 hadoop102 上，将 hadoop102 中/opt/module/jdk1.8.0_212 目录拷贝到hadoop103 上。（推送）")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r /opt/module/jdk1.8.0_212 atguigu@hadoop103:/opt/module\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("在 hadoop103 上，将 hadoop102 中/opt/module/hadoop-3.1.3 目录拷贝到hadoop103 上。(拉取)")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r atguigu@hadoop102:/opt/module/hadoop-3.1.3 /opt/module/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("在 hadoop103 上操作，将 hadoop102 中/opt/module 目录下所有目录拷贝到hadoop104 上。")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" -r atguigu@hadoop102:/opt/module/*  atguigu@hadoop104:/opt/module\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"rsync-远程同步工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rsync-远程同步工具"}},[s._v("#")]),s._v(" "),e("strong",[s._v("rsync")]),s._v(" 远程同步工具")]),s._v(" "),e("p",[s._v("rsync 主要用于备份和镜像。具有速度快、避免复制相同内容和支持符号链接的优点。")]),s._v(" "),e("p",[s._v("rsync 和 scp 区别：用 rsync 做文件的复制要比 scp 的速度快，rsync 只对差异文件做更新。scp 是把所有文件都复制过去。")]),s._v(" "),e("p",[s._v("基本语法：")]),s._v(" "),e("p",[s._v("安装：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("语法：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$user")]),s._v("@"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("-a 归档拷贝")]),s._v(" "),e("p",[s._v("-v 显示复制过程")]),s._v(" "),e("ol",[e("li",[s._v("同步 hadoop102 中的/opt/module/hadoop-3.1.3 到 hadoop103")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av hadoop-3.1.3/ atguigu@hadoop103:/opt/module/hadoop-3.1.3/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h1",{attrs:{id:"xsync-集群分发脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#xsync-集群分发脚本"}},[s._v("#")]),s._v(" "),e("strong",[s._v("xsync")]),s._v(" 集群分发脚本")]),s._v(" "),e("ol",[e("li",[s._v("安装")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[s._v("创建文件夹vim xsync")])]),s._v(" "),e("li",[e("p",[s._v("编写脚本")])])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1. 判断参数个数")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -lt "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" Not Enough Arguement"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2. 遍历集群所有机器")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("host")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" hadoop102 hadoop103 hadoop104\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3. 遍历所有目录，挨个发送")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("file")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#4. 判断文件是否存在")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -e "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#5. 获取父目录")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pdir")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" -P "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("dirname $file"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#6. 获取当前文件的名称")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("fname")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $file"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mkdir -p '),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v('"')]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rsync")]),s._v(" -av "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$fname")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pdir")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$file")]),s._v(" does not exists"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("修改脚本 xsync 具有执行权限")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x xsync\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("脚本存放到用户根目录")])]),s._v(" "),e("h1",{attrs:{id:"ssh无密登录配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssh无密登录配置"}},[s._v("#")]),s._v(" SSH无密登录配置")]),s._v(" "),e("p",[e("strong",[s._v("免密登录原理")])]),s._v(" "),e("p",[e("img",{attrs:{src:t(549),alt:""}})]),s._v(" "),e("p",[e("strong",[s._v("生成公钥和私钥(三台机器上都配置)")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" \n\nssh-keygen -t rsa\n\n然后敲（三个回车），就会生成两个文件 id_rsa（私钥）、id_rsa.pub（公钥）\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[e("strong",[s._v("将公钥拷贝到需要免登录目标机器上(三台机器上都配置)")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("ssh-copy-id hadoop102\nssh-copy-id hadoop103\nssh-copy-id hadoop104\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h1",{attrs:{id:"期望脚本在任何路径都能使用-脚本放在声明了全局环境变量的路径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#期望脚本在任何路径都能使用-脚本放在声明了全局环境变量的路径"}},[s._v("#")]),s._v(" 期望脚本在任何路径都能使用（脚本放在声明了全局环境变量的路径）")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("将脚本拷贝到/bin目录下")])]),s._v(" "),e("li",[e("p",[s._v("赋予执行权限")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x xsync\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);