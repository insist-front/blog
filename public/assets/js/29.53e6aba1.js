(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{601:function(s,a,t){s.exports=t.p+"assets/img/hive-07.8ea08589.jpg"},676:function(s,a,t){"use strict";t.r(a);var r=t(9),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,r=s._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("p",[s._v("Tez 是一个 Hive 的运行引擎，性能优于 MR。为什么优于 MR 呢？看下")]),s._v(" "),r("p",[r("img",{attrs:{src:t(601),alt:""}})]),s._v(" "),r("p",[s._v("用 Hive 直接编写 MR 程序，假设有四个有依赖关系的 MR 作业，上图中，绿色是 ReduceTask，云状表示写屏蔽，需要将中间结果持久化写到 HDFS。")]),s._v(" "),r("p",[s._v("Tez 可以将多个有依赖的作业转换为一个作业，这样只需写一次 HDFS，且中间节点较少，从而大大提升作业的计算性能。")]),s._v(" "),r("p",[r("strong",[s._v("安装")])]),s._v(" "),r("p",[s._v("1.将tez安装包拷贝到集群，并解压 tar包")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/module/tez\n"),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf /opt/software/tez-0.10.1-SNAPSHOT-minimal.tar.gz -C /opt/module/tez\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("2.上传tez依赖到HDFS")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("hadoop fs -mkdir /tez\nhadoop fs -put /opt/software/tez-0.10.1-SNAPSHOT.tar.gz /tez\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br")])]),r("p",[s._v("3.新建tez-site.xml")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/etc/hadoop/tez-site.xml\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("添加")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("?xml "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("encoding")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF-8"')]),s._v("?"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("?xml-stylesheet "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text/xsl"')]),s._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("href")]),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"configuration.xsl"')]),s._v("?"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("configuration"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.lib.uris"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${fs.defaultFS}")]),s._v("/tez/tez-0.10.1-SNAPSHOT.tar.gz"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.use.cluster.hadoop-libs"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.am.resource.memory.mb"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.am.resource.cpu.vcores"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.container.max.java.heap.fraction"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("."),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.task.resource.memory.mb"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez.task.resource.cpu.vcores"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/configuration"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br"),r("span",{staticClass:"line-number"},[s._v("9")]),r("br"),r("span",{staticClass:"line-number"},[s._v("10")]),r("br"),r("span",{staticClass:"line-number"},[s._v("11")]),r("br"),r("span",{staticClass:"line-number"},[s._v("12")]),r("br"),r("span",{staticClass:"line-number"},[s._v("13")]),r("br"),r("span",{staticClass:"line-number"},[s._v("14")]),r("br"),r("span",{staticClass:"line-number"},[s._v("15")]),r("br"),r("span",{staticClass:"line-number"},[s._v("16")]),r("br"),r("span",{staticClass:"line-number"},[s._v("17")]),r("br"),r("span",{staticClass:"line-number"},[s._v("18")]),r("br"),r("span",{staticClass:"line-number"},[s._v("19")]),r("br"),r("span",{staticClass:"line-number"},[s._v("20")]),r("br"),r("span",{staticClass:"line-number"},[s._v("21")]),r("br"),r("span",{staticClass:"line-number"},[s._v("22")]),r("br"),r("span",{staticClass:"line-number"},[s._v("23")]),r("br"),r("span",{staticClass:"line-number"},[s._v("24")]),r("br"),r("span",{staticClass:"line-number"},[s._v("25")]),r("br"),r("span",{staticClass:"line-number"},[s._v("26")]),r("br"),r("span",{staticClass:"line-number"},[s._v("27")]),r("br"),r("span",{staticClass:"line-number"},[s._v("28")]),r("br"),r("span",{staticClass:"line-number"},[s._v("29")]),r("br"),r("span",{staticClass:"line-number"},[s._v("30")]),r("br"),r("span",{staticClass:"line-number"},[s._v("31")]),r("br"),r("span",{staticClass:"line-number"},[s._v("32")]),r("br")])]),r("p",[s._v("4.修改Hadoop环境变量")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v("/etc/hadoop/shellprofile.d/tez.sh\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("添加 Tez 的 Jar 包相关信息")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v("hadoop_add_profile tez\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("_tez_hadoop_classpath")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n hadoop_add_classpath "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HADOOP_HOME")]),s._v('/etc/hadoop"')]),s._v(" after\n hadoop_add_classpath "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/tez/*"')]),s._v(" after\n hadoop_add_classpath "),r("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/opt/module/tez/lib/*"')]),s._v(" after\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br")])]),r("p",[s._v("5.修改Hive的计算引擎")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[s._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),r("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$HIVE_HOME")]),s._v("/conf/hive-site.xml\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("p",[s._v("添加")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hive.execution.engine"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("tez"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("hive.tez.container.size"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/name"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n "),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),r("span",{pre:!0,attrs:{class:"token number"}},[s._v("102")]),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("4")]),s._v("<")]),s._v("/value"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/property"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br"),r("span",{staticClass:"line-number"},[s._v("5")]),r("br"),r("span",{staticClass:"line-number"},[s._v("6")]),r("br"),r("span",{staticClass:"line-number"},[s._v("7")]),r("br"),r("span",{staticClass:"line-number"},[s._v("8")]),r("br")])]),r("p",[s._v("6.解决日志Jar包冲突")]),s._v(" "),r("div",{staticClass:"language-shell line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" /opt/module/tez/lib/slf4j-log4j12-1.7.10.jar\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);